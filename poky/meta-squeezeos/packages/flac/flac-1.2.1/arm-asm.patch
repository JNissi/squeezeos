diff -urN flac-1.2.1/configure.in flac-1.2.1-patched/configure.in
--- flac-1.2.1/configure.in	2007-09-13 11:48:42.000000000 -0400
+++ flac-1.2.1-patched/configure.in	2010-05-21 10:05:08.972160528 -0400
@@ -314,6 +314,7 @@
 	src/Makefile \
 	src/libFLAC/Makefile \
 	src/libFLAC/flac.pc \
+	src/libFLAC/arm/Makefile \
 	src/libFLAC/ia32/Makefile \
 	src/libFLAC/ppc/Makefile \
 	src/libFLAC/ppc/as/Makefile \
diff -urN flac-1.2.1/src/libFLAC/arm/fixed_asm.s flac-1.2.1-patched/src/libFLAC/arm/fixed_asm.s
--- flac-1.2.1/src/libFLAC/arm/fixed_asm.s	1969-12-31 19:00:00.000000000 -0500
+++ flac-1.2.1-patched/src/libFLAC/arm/fixed_asm.s	2010-05-21 09:56:09.292160619 -0400
@@ -0,0 +1,236 @@
+@  libFLAC - Free Lossless Audio Codec library
+@  Copyright (C) 2001,2002,2003,2004,2005,2006  Josh Coalson
+@
+@  Redistribution and use in source and binary forms, with or without
+@  modification, are permitted provided that the following conditions
+@  are met:
+@
+@  - Redistributions of source code must retain the above copyright
+@  notice, this list of conditions and the following disclaimer.
+@
+@  - Redistributions in binary form must reproduce the above copyright
+@  notice, this list of conditions and the following disclaimer in the
+@  documentation and/or other materials provided with the distribution.
+@
+@  - Neither the name of the Xiph.org Foundation nor the names of its
+@  contributors may be used to endorse or promote products derived from
+@  this software without specific prior written permission.
+@
+@  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
+@  ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
+@  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
+@  A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR
+@  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
+@  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
+@  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES@ LOSS OF USE, DATA, OR
+@  PROFITS@ OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+@  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+@  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+@  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+
+	.text
+	.align	2
+	.global	FLAC__fixed_restore_signal_asm_arm
+	.type	FLAC__fixed_restore_signal_asm_arm, %function
+FLAC__fixed_restore_signal_asm_arm:
+	stmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r14}
+	@	r0 = residual;
+	@	r1 = data_len;
+	@	r2 = order;
+	@	r3 = data;
+
+	cmp	r2, #4
+	ldrls	r15, [r15, r2, asl #2]
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+	.align	2
+	.word	.Lorder0
+	.word	.Lorder1
+	.word	.Lorder2
+	.word	.Lorder3
+	.word	.Lorder4
+
+	@ data[i] = residual[i];
+.Lorder0:
+	tst	r1, #15
+	beq	.Lorder0b
+.Lorder0a:
+	@ start off slow until we get to (data_len % 16) == 0
+	ldr	r2, [r0], #4
+	str	r2, [r3], #4
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	tst	r1, #15
+	bne	.Lorder0a
+.Lorder0b:
+	@ WHEEEEEEEEEEEEEE!!!!!!!!!!!!!!!!!!!
+	ldmia	r0!, {r5 - r12}
+	stmia	r3!, {r5 - r12}
+	ldmia	r0!, {r5 - r12}
+	stmia	r3!, {r5 - r12}
+	subs	r1, r1, #16
+	bne	.Lorder0b
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+	@ data[i] = residual[i] + data[i-1];
+.Lorder1:
+	ldr	r14, [r3,#-4]
+	tst	r1, #7
+	beq	.Lorder1b
+.Lorder1a:
+	ldr	r2, [r0], #4
+	add	r14, r2, r14
+	str	r14, [r3], #4
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	tst	r1, #7
+	bne	.Lorder1a
+.Lorder1b:
+	ldmia	r0!, {r2, r4 - r10}
+	add	r2, r2, r14
+	add	r4, r4, r2
+	add	r5, r5, r4
+	add	r6, r6, r5
+	add	r7, r7, r6
+	add	r8, r8, r7
+	add	r9, r9, r8
+	add	r14, r10, r9
+	stmia	r3!, {r2, r4 - r9, r14}
+	subs	r1, r1, #8
+	bne	.Lorder1b
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+	@ data[i] = residual[i] + (data[i-1]<<1) - data[i-2];
+.Lorder2:
+	@ r12 = data[i-2], r14 = data[i-1]
+	ldmdb	r3, {r12, r14}
+	tst	r1, #7
+	beq	.Lorder2b
+.Lorder2a:
+	ldr	r2, [r0], #4
+	add	r2, r2, r14, asl #1
+	sub	r2, r2, r12
+	str	r2, [r3], #4
+	mov	r12, r14
+	mov	r14, r2
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	tst	r1, #7
+	bne	.Lorder2a
+.Lorder2b:
+	ldmia	r0!, {r2, r4 - r10}
+
+	@ r12 = data[i-2], r14 = data[i-1]
+	add	r2, r2, r14, asl #1
+	sub	r2, r2, r12
+
+	add	r4, r4, r2, asl #1
+	sub	r4, r4, r14
+
+	add	r5, r5, r4, asl #1
+	sub	r5, r5, r2
+
+	add	r6, r6, r5, asl #1
+	sub	r6, r6, r4
+
+	add	r7, r7, r6, asl #1
+	sub	r7, r7, r5
+
+	add	r8, r8, r7, asl #1
+	sub	r8, r8, r6
+
+	add	r9, r9, r8, asl #1
+	sub	r12, r9, r7
+
+	add	r10, r10, r12, asl #1
+	sub	r14, r10, r8
+
+	stmia	r3!, {r2, r4 - r8, r12, r14}
+	subs	r1, r1, #8
+	bne	.Lorder2b
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+	@ data[i] = residual[i] + (((data[i-1]-data[i-2])<<1)
+	@	+ (data[i-1]-data[i-2])) + data[i-3];
+	.macro	do_order_3, dest, res_i, b3, b2, b1, tmp
+	add	\res_i, \res_i, \b3
+	sub	\tmp, \b1, \b2
+	add	\tmp, \tmp, \tmp, asl #1
+	add	\dest, \res_i, \tmp
+	.endm
+.Lorder3:
+	ldmdb		r3, { r11, r12, r14 }
+	tst		r1, #7
+	beq		.Lorder3b
+.Lorder3a:
+	ldr		r2, [r0], #4
+
+	do_order_3	r2, r2, r11, r12, r14, r11
+	str		r2, [r3], #4
+
+	ldmdb		r3, { r11, r12, r14 }
+
+	subs		r1, r1, #1
+	ldmeqfd		r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	tst		r1, #7
+	bne		.Lorder3a
+.Lorder3b:
+	ldmia		r0!, {r2, r4 - r10}
+
+	do_order_3	r2, r2, r11, r12, r14, r11
+	do_order_3	r4, r4, r12, r14, r2, r12
+	do_order_3	r5, r5, r14, r2, r4, r14
+	do_order_3	r6, r6, r2, r4, r5, r11
+
+	do_order_3	r7, r7, r4, r5, r6, r12
+	do_order_3	r11, r8, r5, r6, r7, r11
+	do_order_3	r12, r9, r6, r7, r11, r12
+	do_order_3	r14, r10, r7, r11, r12, r14
+
+	stmia		r3!, {r2, r4 - r7, r11, r12, r14}
+	subs		r1, r1, #8
+	bne		.Lorder3b
+	ldmfd		r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+	@ data[i] = residual[i] + ((data[i-1]+data[i-3])<<2)
+	@		- ((data[i-2]<<2) + (data[i-2]<<1)) - data[i-4];
+	.macro	do_order_4, dest, res_i, b4, b3, b2, b1, tmp
+	sub	\res_i, \res_i, \b4
+	add	\tmp, \b1, \b3
+	add	\res_i, \res_i, \tmp, asl #2
+	sub	\res_i, \res_i, \b2, asl #2
+	sub	\dest, \res_i, \b2, asl #1
+	.endm
+.Lorder4:
+	ldmdb		r3, {r7, r11, r12, r14}
+	tst		r1, #7
+	beq		.Lorder4b
+.Lorder4a:
+	ldr		r2, [r0], #4
+	do_order_4	r2, r2, r7, r11, r12, r14, r7
+	str		r2, [r3], #4
+	ldmdb		r3, {r7, r11, r12, r14}
+	subs		r1, r1, #1
+	ldmeqfd		r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	tst		r1, #7
+	bne		.Lorder4a
+.Lorder4b:
+	ldr		r2, [r0], #4
+	do_order_4	r2, r2, r7, r11, r12, r14, r10
+
+	ldmia		r0!, {r4 - r10}
+
+	do_order_4	r4, r4, r11, r12, r14, r2, r11
+	do_order_4	r5, r5, r12, r14, r2, r4, r12
+	do_order_4	r6, r6, r14, r2, r4, r5, r14
+
+	do_order_4	r7, r7, r2, r4, r5, r6, r11
+	do_order_4	r11, r8, r4, r5, r6, r7, r11
+	do_order_4	r12, r9, r5, r6, r7, r11, r12
+	do_order_4	r14, r10, r6, r7, r11, r12, r14
+
+	stmia		r3!, {r2, r4, r5, r6, r7, r11, r12, r14}
+	subs		r1, r1, #8
+	bne		.Lorder4b
+	ldmfd		r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	.size	FLAC__fixed_restore_signal_asm_arm, .-FLAC__fixed_restore_signal_asm_arm
diff -urN flac-1.2.1/src/libFLAC/arm/lpc_asm.s flac-1.2.1-patched/src/libFLAC/arm/lpc_asm.s
--- flac-1.2.1/src/libFLAC/arm/lpc_asm.s	1969-12-31 19:00:00.000000000 -0500
+++ flac-1.2.1-patched/src/libFLAC/arm/lpc_asm.s	2010-05-21 09:56:09.162164597 -0400
@@ -0,0 +1,678 @@
+@  libFLAC - Free Lossless Audio Codec library
+@  Copyright (C) 2001,2002,2003,2004,2005,2006  Josh Coalson
+@
+@  Redistribution and use in source and binary forms, with or without
+@  modification, are permitted provided that the following conditions
+@  are met:
+@
+@  - Redistributions of source code must retain the above copyright
+@  notice, this list of conditions and the following disclaimer.
+@
+@  - Redistributions in binary form must reproduce the above copyright
+@  notice, this list of conditions and the following disclaimer in the
+@  documentation and/or other materials provided with the distribution.
+@
+@  - Neither the name of the Xiph.org Foundation nor the names of its
+@  contributors may be used to endorse or promote products derived from
+@  this software without specific prior written permission.
+@
+@  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
+@  ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
+@  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
+@  A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR
+@  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
+@  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
+@  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES@ LOSS OF USE, DATA, OR
+@  PROFITS@ OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+@  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+@  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+@  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+
+@ TODO: special cases for order 9, 10, 11, 12 may be further optimizable...
+
+	.text
+	.align 2
+	.global	FLAC__lpc_restore_signal_asm_arm
+	.type	FLAC__lpc_restore_signal_asm_arm, %function
+FLAC__lpc_restore_signal_asm_arm:
+	stmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r14}
+	@	r0 = residual;
+	@	r1 = data_len;
+	@	r2 = qlp_coeff;
+	@	r3 = order;
+	@	r5 = lp_quantization
+	@	r14 = &data
+	ldr	r5, [r13, #40]		@ lp_quantization
+	ldr	r14, [r13, #44]		@ &data
+
+
+	@ Special case each of the common LPC order levels used by encoders
+	@ switch (order) { ...
+	sub	r6, r3, #1
+	cmp	r6, #11
+	ldrls	r15, [r15, r6, asl #2]
+	b	.Lgeneric_restore_signal
+
+	.align  2
+	.word	.Lorder1
+	.word	.Lorder2
+	.word	.Lorder3
+	.word	.Lorder4
+	.word	.Lorder5
+	.word	.Lorder6
+	.word	.Lorder7
+	.word	.Lorder8
+	.word	.Lorder9
+	.word	.Lorder10
+	.word	.Lorder11
+	.word	.Lorder12
+.Lorder12:
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[0 - 3]
+	sub	r14, r14, #16		@ &data[-4]
+.Lorder12a:
+	ldmia	r14, {r3, r4, r6, r7}	@ r14 = &data[-4]
+	mul	r12, r8, r7
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[4 - 7]
+	ldmdb	r14!, {r3, r4, r6, r7}	@ r14 = &data[-4] => &data[-8]
+	mla	r12, r8, r7, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2, {r8 - r11}		@ qlp_coeff[8 - 11]
+	ldmdb	r14, {r3, r4, r6, r7}
+	mla	r12, r8, r7, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #32]
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	add	r14, r14, #4		@ data++, r14 = &data[-4]
+
+	ldmdb	r14, {r3, r4, r6, r7}	@ data[-12, -11, -10, -9], &data[-8]
+	mul	r12, r11, r3
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2!, {r8 - r11}		@ qlp_coeff[4 - 7]
+	ldmia	r14!, {r3, r4, r6, r7}	@ &data[-4]
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2, {r8 - r11}		@ qlp_coeff[0 - 3]
+	ldmia	r14, {r3, r4, r6, r7}
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #16]
+	subs	r1, r1, #1
+	add	r14, r14, #4		@ r14 = &data[-4]
+	bne	.Lorder12a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder11:
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[0 - 3]
+	sub	r14, r14, #16		@ &data[-4]
+.Lorder11a:
+	ldmia	r14, {r3, r4, r6, r7}	@ r14 = &data[-4]
+	mul	r12, r8, r7
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[4 - 7]
+	ldmdb	r14!, {r3, r4, r6, r7}	@ r14 = &data[-4] => &data[-8]
+	mla	r12, r8, r7, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2, {r8 - r10}		@ qlp_coeff[8 - 11]
+	ldmda	r14, {r3, r4, r6, r7}	@ we'll reuse r4, r6, and r7
+	mla	r12, r8, r6, r12
+	mla	r12, r9, r4, r12
+	mla	r12, r10, r3, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #32]
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	add	r14, r14, #4		@ data++, r14 = &data[-4]
+
+	mul	r12, r10, r4
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2!, {r8 - r11}		@ qlp_coeff[4 - 7]
+	ldmia	r14!, {r3, r4, r6, r7}	@ &data[-4]
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2, {r8 - r11}		@ qlp_coeff[0 - 3]
+	ldmia	r14, {r3, r4, r6, r7}
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #16]
+	subs	r1, r1, #1
+	add	r14, r14, #4		@ r14 = &data[-4]
+	bne	.Lorder11a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder10:
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[0 - 3]
+	sub	r14, r14, #16		@ &data[-4]
+.Lorder10a:
+	ldmia	r14, {r3, r4, r6, r7}	@ r14 = &data[-4]
+	mul	r12, r8, r7
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[4 - 7]
+	ldmdb	r14!, {r3, r4, r6, r7}	@ r14 = &data[-4] => &data[-8]
+	mla	r12, r8, r7, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2, {r8, r9}
+	ldmda	r14, {r4, r6, r7}	@ we'll reuse r4, r6, and r7
+	mla	r12, r8, r6, r12
+	mla	r12, r9, r4, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #32]
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	add	r14, r14, #4		@ data++, r14 = &data[-4]
+
+	mul	r12, r9, r6
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2!, {r8 - r11}		@ qlp_coeff[4 - 7]
+	ldmia	r14!, {r3, r4, r6, r7}	@ &data[-4]
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2, {r8 - r11}		@ qlp_coeff[0 - 3]
+	ldmia	r14, {r3, r4, r6, r7}
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #16]
+	subs	r1, r1, #1
+	add	r14, r14, #4		@ r14 = &data[-4]
+	bne	.Lorder10a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder9:
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[0 - 3]
+	sub	r14, r14, #16		@ &data[-4]
+.Lorder9a:
+	ldmia	r14, {r3, r4, r6, r7}	@ r14 = &data[-4]
+	mul	r12, r8, r7
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[4 - 7]
+	ldmdb	r14!, {r3, r4, r6, r7}	@ r14 = &data[-4] => &data[-8]
+	mla	r12, r8, r7, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldr	r8, [r2]
+	ldmda	r14, {r6, r7}	@ we'll reuse r7
+	mla	r12, r8, r6, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #32]
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	add	r14, r14, #4		@ data++, r14 = &data[-4]
+
+	mul	r12, r8, r7
+
+	ldmdb	r2!, {r8 - r11}		@ qlp_coeff[4 - 7]
+	ldmia	r14!, {r3, r4, r6, r7}	@ &data[-4]
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2, {r8 - r11}		@ qlp_coeff[0 - 3]
+	ldmia	r14, {r3, r4, r6, r7}
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #16]
+	subs	r1, r1, #1
+	add	r14, r14, #4		@ r14 = &data[-4]
+	bne	.Lorder9a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder8:
+	ldmia	r2!, {r8 - r11}		@ qlp_coeff[0 - 3]
+	sub	r14, r14, #16
+.Lorder8a:
+	ldmia	r14, {r3, r4, r6, r7}	@ r14 = &data[-4]
+	mul	r12, r8, r7
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2, {r8 - r11}		@ qlp_coeff [4 - 7]
+	ldmdb	r14, {r3, r4, r6, r7}	@ r14 = &data[-4]
+	mla	r12, r8, r7, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #16]
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	add	r14, r14, #4		@ data++, r14 = &data[-4]
+
+	ldmdb	r14, {r3, r4, r6, r7}	@ data[-8, -7, -6, -5]
+	mul	r12, r11, r3		@ q[7] * d[-8]
+	mla	r12, r10, r4, r12	@ q[6] * d[-7]
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2, {r8 - r11}		@ qlp_coeff[0 - 3]
+	ldmia	r14, {r3, r4, r6, r7}	@ r14 = &data[-4]
+
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #16]
+	subs	r1, r1, #1
+	add	r14, r14, #4		@ r14 = &data[-4]
+	bne	.Lorder8a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder7:
+	ldmia	r2!, {r8 - r11}
+	sub	r14, r14, #16
+.Lorder7a:
+	ldmia	r14, {r3, r4, r6, r7}
+	mul	r12, r8, r7
+	mla	r12, r9, r6, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r11, r3, r12
+
+	ldmia	r2, {r8 - r10}
+	ldmda	r14, {r3, r4, r6, r7} @ we reuse r4, r6, r7 below, too:
+	mla	r12, r8, r6, r12
+	mla	r12, r9, r4, r12
+	mla	r12, r10, r3, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #16]
+
+	subs	r1, r1, #1
+	ldmeqfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+	add	r14, r14, #4
+
+	mul	r12, r10, r4
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldmdb	r2, {r8 - r11}
+	ldmia	r14, {r3, r4, r6, r7}
+
+	mla	r12, r11, r3, r12
+	mla	r12, r10, r4, r12
+	mla	r12, r9, r6, r12
+	mla	r12, r8, r7, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #16]
+	subs	r1, r1, #1
+	add	r14, r14, #4
+
+	bne	.Lorder7a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder6:
+	ldmia	r2, {r6 - r11}		@ qlp_coeff[0 - 5]
+	sub	r14, r14, #12		@ data[-3]
+.Lorder6a:
+	ldmia	r14, {r2 - r4}
+	mul	r12, r6, r4
+	mla	r12, r7, r3, r12
+	mla	r12, r8, r2, r12
+
+	ldmdb	r14, {r2 - r4}
+	mla	r12, r9, r4, r12
+	mla	r12, r10, r3, r12
+	mla	r12, r11, r2, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14, #12]
+	add	r14, r14, #4
+	subs	r1, r1, #1
+	bne	.Lorder6a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder5:
+	ldmia	r2, {r6 - r10}		@ qlp_coeff[0 - 4]
+	ldr	r12, [r14, #-4]!	@ &data[-1]
+.Lorder5a:
+	ldmdb	r14, {r2, r3, r4, r11}
+	mul	r12, r6, r12
+	mla	r12, r7, r11, r12
+	mla	r12, r8, r4, r12
+	mla	r12, r9, r3, r12
+	mla	r11, r10, r2, r12
+
+	ldr	r3, [r0], #4
+	add	r12, r3, r11, asr r5
+	str	r12, [r14, #4]!
+
+	subs	r1, r1, #1
+	bne	.Lorder5a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder4:
+	ldmia	r2, {r6 - r9}		@ qlp_coeff[0 - 3]
+.Lorder4a:
+	ldmdb	r14, {r2 - r4, r11}
+	mul	r12, r6, r11
+	mla	r12, r7, r4, r12
+	mla	r12, r8, r3, r12
+	mla	r12, r9, r2, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14], #4
+
+	subs	r1, r1, #1
+	bne	.Lorder4a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder3:
+	ldmia	r2, {r6 - r8}		@ qlp_coeff[0 - 2]
+.Lorder3a:
+	ldmdb	r14, {r2 - r4}
+	mul	r12, r6, r4
+	mla	r12, r7, r3, r12
+	mla	r12, r8, r2, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14], #4
+
+	subs	r1, r1, #1
+	bne	.Lorder3a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder2:
+	ldmia	r2, {r6, r7}		@ qlp_coeff[0, 1]
+	ldmdb	r14, {r2, r3}
+.Lorder2a:
+	mul	r12, r6, r3
+	mla	r12, r7, r2, r12
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	ldr	r2, [r14, #-4]
+	str	r3, [r14], #4
+
+	subs	r1, r1, #1
+	bne	.Lorder2a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+.Lorder1:
+	ldr	r6, [r2]
+	ldr	r3, [r14, #-4]
+.Lorder1a:
+	mul	r12, r6, r3
+
+	ldr	r3, [r0], #4
+	add	r3, r3, r12, asr r5
+	str	r3, [r14], #4
+
+	subs	r1, r1, #1
+	bne	.Lorder1a
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+@ this part started out as a Duff's Device in C, but now it's
+@ optimized to take advantage of the ldm instructions:
+.Lgeneric_restore_signal:
+	add	r2, r2, r3, asl #2	@ qlp0 = &qlp_coeff[order]
+	add	r7, r3, #7		@ order + 7
+	mov	r8, r7, lsr #3		@ n = (order + 7) / (2^3)
+.Lduffs_device_outer:
+	sub	r14, r14, r3, asl #2	@ r8 = history = &data[-order]
+
+	mov	r7, r8
+	mov	r9, r2			@ qlp = qlp0
+	mov	r12, #0			@ sum = 0
+
+	@ switch (order % 8)
+	and	r4, r3, #7
+	cmp	r4, #7
+	ldrls	r15, [r15, r4, asl #2]
+	b	.Lduffs_end
+
+	.align 2
+	.word .Lduffs_case0
+	.word .Lduffs_case1
+	.word .Lduffs_case2
+	.word .Lduffs_case3
+	.word .Lduffs_case4
+	.word .Lduffs_case5
+	.word .Lduffs_case6
+	.word .Lduffs_case7
+
+.Lduffs_case7:
+	ldmia	r14!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	mla	r12, r4, r11, r12
+	mla	r12, r6, r10, r12
+.Lduffs_case5:
+	ldmia	r14!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	mla	r12, r4, r11, r12
+	mla	r12, r6, r10, r12
+.Lduffs_case3:
+	ldmia	r14!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	mla	r12, r4, r11, r12
+	mla	r12, r6, r10, r12
+.Lduffs_case1:
+	ldr	r10, [r9, #-4]!
+	ldr	r11, [r14], #4
+	mla	r12, r10, r11, r12
+
+	subs	r7, r7, #1
+	bne	.Lduffs_case0
+
+.Lduffs_end:
+	ldr	r10, [r0], #4
+	add	r11, r10, r12, asr r5
+	str	r11, [r14], #4
+	subs	r1, r1, #1
+	bne	.Lduffs_device_outer
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+.Lduffs_case0:
+	ldmia	r14!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	mla	r12, r4, r11, r12
+	mla	r12, r6, r10, r12
+.Lduffs_case6:
+	ldmia	r14!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	mla	r12, r4, r11, r12
+	mla	r12, r6, r10, r12
+.Lduffs_case4:
+	ldmia	r14!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	mla	r12, r4, r11, r12
+	mla	r12, r6, r10, r12
+.Lduffs_case2:
+	ldmia	r14!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	mla	r12, r4, r11, r12
+	mla	r12, r6, r10, r12
+
+	subs	r7, r7, #1
+	bne	.Lduffs_case0
+
+	ldr	r10, [r0], #4
+	add	r11, r10, r12, asr r5
+	str	r11, [r14], #4
+	subs	r1, r1, #1
+	bne	.Lduffs_device_outer
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+	.size	FLAC__lpc_restore_signal_asm_arm, .-FLAC__lpc_restore_signal_asm_arm
+	.align 2
+	.global	FLAC__lpc_restore_signal_asm_arm_wide
+	.type	FLAC__lpc_restore_signal_asm_arm_wide, %function
+FLAC__lpc_restore_signal_asm_arm_wide:
+	stmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r14}
+	@ r0 = residual;
+	@ r1 = data_len;
+	@ r2 = qlp_coeff;
+	@ r3 = order;
+
+	.macro finish_loop
+	@ 64-bit arithmetic shift right:
+	mov	r7, r7, lsr r2		@ shift lo register r2 bits right
+	rsb	r10, r2, #32
+	mov	r11, r12, lsl r10	@ shift hi register (32 - r2) bits left
+	orr	r7, r7, r11		@ combine new-hi and new-lo in one word
+	ands	r6, r12, #0x80000000	@ mask sign bit from original hi word
+	orrne	r7, r7, r6		@ restore sign bit from the original
+
+	ldr	r10, [r0], #4		@ residual
+	add	r12, r10, r7
+	str	r12, [r8], #4
+	subs	r1, r1, #1
+	bne	.Lwide_duffs_device_outer
+	.endm
+
+	add	r5, r2, r3, asl #2	@ qlp0 = &qlp_coeff[order]
+
+	ldr	r2, [r13, #40]		@ lp_quantization
+	ldr	r8, [r13, #44]		@ &data
+.Lwide_duffs_device_outer:
+	sub	r8, r8, r3, asl #2	@ r8 = data = &data[-order]
+	add	r14, r3, #7		@ order + 7
+	mov	r14, r14, lsr #3	@ n = (order + 7) / (2^3)
+
+	mov	r9, r5			@ qlp = qlp0
+	mov	r7, #0			@ sum = 0
+	mov	r12, #0			@ sum = 0
+
+	@ switch (order % 8)
+	and	r4, r3, #7
+	cmp	r4, #7
+	ldrls	r15, [r15, r4, asl #2]
+	b	.Lwide_duffs_end
+
+	.align 2
+	.word .Lwide_duffs_case0
+	.word .Lwide_duffs_case1
+	.word .Lwide_duffs_case2
+	.word .Lwide_duffs_case3
+	.word .Lwide_duffs_case4
+	.word .Lwide_duffs_case5
+	.word .Lwide_duffs_case6
+	.word .Lwide_duffs_case7
+
+.Lwide_duffs_case7:
+	ldmia	r8!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	smlal	r7, r12, r4, r11
+	smlal	r7, r12, r6, r10
+.Lwide_duffs_case5:
+	ldmia	r8!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	smlal	r7, r12, r4, r11
+	smlal	r7, r12, r6, r10
+.Lwide_duffs_case3:
+	ldmia	r8!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	smlal	r7, r12, r4, r11
+	smlal	r7, r12, r6, r10
+.Lwide_duffs_case1:
+	ldr	r10, [r9, #-4]!
+	ldr	r11, [r8], #4
+	smlal	r7, r12, r10, r11
+
+	subs	r14, r14, #1		@ --n
+	bne	.Lwide_duffs_case0
+
+.Lwide_duffs_end:
+	finish_loop
+
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+.Lwide_duffs_case0:
+	ldmia	r8!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	smlal	r7, r12, r4, r11
+	smlal	r7, r12, r6, r10
+.Lwide_duffs_case6:
+	ldmia	r8!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	smlal	r7, r12, r4, r11
+	smlal	r7, r12, r6, r10
+.Lwide_duffs_case4:
+	ldmia	r8!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	smlal	r7, r12, r4, r11
+	smlal	r7, r12, r6, r10
+.Lwide_duffs_case2:
+	ldmia	r8!, {r4, r6}
+	ldmdb	r9!, {r10, r11}
+	smlal	r7, r12, r4, r11
+	smlal	r7, r12, r6, r10
+
+	subs	r14, r14, #1		@ --n
+	bne	.Lwide_duffs_case0
+
+	finish_loop
+
+	ldmfd	r13!, {r4, r5, r6, r7, r8, r9, r10, r11, r12, r15}
+
+	.size	FLAC__lpc_restore_signal_asm_arm_wide, .-FLAC__lpc_restore_signal_asm_arm_wide
+
diff -urN flac-1.2.1/src/libFLAC/arm/Makefile.am flac-1.2.1-patched/src/libFLAC/arm/Makefile.am
--- flac-1.2.1/src/libFLAC/arm/Makefile.am	1969-12-31 19:00:00.000000000 -0500
+++ flac-1.2.1-patched/src/libFLAC/arm/Makefile.am	2010-05-21 09:56:09.265912909 -0400
@@ -0,0 +1,42 @@
+#  libFLAC - Free Lossless Audio Codec library
+#  Copyright (C) 2001,2002,2003,2004,2005,2006  Josh Coalson
+#
+#  Redistribution and use in source and binary forms, with or without
+#  modification, are permitted provided that the following conditions
+#  are met:
+#
+#  - Redistributions of source code must retain the above copyright
+#  notice, this list of conditions and the following disclaimer.
+#
+#  - Redistributions in binary form must reproduce the above copyright
+#  notice, this list of conditions and the following disclaimer in the
+#  documentation and/or other materials provided with the distribution.
+#
+#  - Neither the name of the Xiph.org Foundation nor the names of its
+#  contributors may be used to endorse or promote products derived from
+#  this software without specific prior written permission.
+#
+#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
+#  ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
+#  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
+#  A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR
+#  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
+#  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
+#  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
+#  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+#  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+#  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+#  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+
+SUFFIXES = .s .lo
+
+STRIP_NON_ASM = sh $(top_srcdir)/strip_non_asm_libtool_args.sh
+
+.s.lo:
+	$(LTCCASCOMPILE) -c -o $@ $<
+
+noinst_LTLIBRARIES = libFLAC-asm.la
+libFLAC_asm_la_SOURCES = \
+	fixed_asm.s \
+	lpc_asm.s
+
diff -urN flac-1.2.1/src/libFLAC/arm/Makefile.in flac-1.2.1-patched/src/libFLAC/arm/Makefile.in
--- flac-1.2.1/src/libFLAC/arm/Makefile.in	1969-12-31 19:00:00.000000000 -0500
+++ flac-1.2.1-patched/src/libFLAC/arm/Makefile.in	2010-05-21 09:56:09.385913490 -0400
@@ -0,0 +1,482 @@
+# Makefile.in generated by automake 1.10.1 from Makefile.am.
+# @configure_input@
+
+# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
+# 2003, 2004, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
+# This Makefile.in is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+@SET_MAKE@
+
+#  libFLAC - Free Lossless Audio Codec library
+#  Copyright (C) 2001,2002,2003,2004,2005,2006  Josh Coalson
+#
+#  Redistribution and use in source and binary forms, with or without
+#  modification, are permitted provided that the following conditions
+#  are met:
+#
+#  - Redistributions of source code must retain the above copyright
+#  notice, this list of conditions and the following disclaimer.
+#
+#  - Redistributions in binary form must reproduce the above copyright
+#  notice, this list of conditions and the following disclaimer in the
+#  documentation and/or other materials provided with the distribution.
+#
+#  - Neither the name of the Xiph.org Foundation nor the names of its
+#  contributors may be used to endorse or promote products derived from
+#  this software without specific prior written permission.
+#
+#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
+#  ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
+#  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
+#  A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR
+#  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
+#  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
+#  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
+#  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+#  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+#  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+#  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+
+VPATH = @srcdir@
+pkgdatadir = $(datadir)/@PACKAGE@
+pkglibdir = $(libdir)/@PACKAGE@
+pkgincludedir = $(includedir)/@PACKAGE@
+am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
+install_sh_DATA = $(install_sh) -c -m 644
+install_sh_PROGRAM = $(install_sh) -c
+install_sh_SCRIPT = $(install_sh) -c
+INSTALL_HEADER = $(INSTALL_DATA)
+transform = $(program_transform_name)
+NORMAL_INSTALL = :
+PRE_INSTALL = :
+POST_INSTALL = :
+NORMAL_UNINSTALL = :
+PRE_UNINSTALL = :
+POST_UNINSTALL = :
+build_triplet = @build@
+host_triplet = @host@
+subdir = src/libFLAC/arm
+DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
+am__aclocal_m4_deps = $(top_srcdir)/m4/ogg.m4 $(top_srcdir)/m4/xmms.m4 \
+	$(top_srcdir)/configure.in
+am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
+	$(ACLOCAL_M4)
+mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/config.h
+CONFIG_CLEAN_FILES =
+LTLIBRARIES = $(noinst_LTLIBRARIES)
+libFLAC_asm_la_LIBADD =
+am_libFLAC_asm_la_OBJECTS = fixed_asm.lo lpc_asm.lo
+libFLAC_asm_la_OBJECTS = $(am_libFLAC_asm_la_OBJECTS)
+DEFAULT_INCLUDES = -I.@am__isrc@ -I$(top_builddir)
+CCASCOMPILE = $(CCAS) $(AM_CCASFLAGS) $(CCASFLAGS)
+LTCCASCOMPILE = $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
+	--mode=compile $(CCAS) $(AM_CCASFLAGS) $(CCASFLAGS)
+COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
+	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+LTCOMPILE = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
+	--mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
+	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+CCLD = $(CC)
+LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
+	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
+	$(LDFLAGS) -o $@
+SOURCES = $(libFLAC_asm_la_SOURCES)
+DIST_SOURCES = $(libFLAC_asm_la_SOURCES)
+ETAGS = etags
+CTAGS = ctags
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
+ACLOCAL = @ACLOCAL@
+ACLOCAL_AMFLAGS = @ACLOCAL_AMFLAGS@
+AMTAR = @AMTAR@
+AR = @AR@
+AS = @AS@
+AUTOCONF = @AUTOCONF@
+AUTOHEADER = @AUTOHEADER@
+AUTOMAKE = @AUTOMAKE@
+AWK = @AWK@
+CC = @CC@
+CCAS = @CCAS@
+CCASDEPMODE = @CCASDEPMODE@
+CCASFLAGS = @CCASFLAGS@
+CCDEPMODE = @CCDEPMODE@
+CFLAGS = @CFLAGS@
+CPP = @CPP@
+CPPFLAGS = @CPPFLAGS@
+CXX = @CXX@
+CXXCPP = @CXXCPP@
+CXXDEPMODE = @CXXDEPMODE@
+CXXFLAGS = @CXXFLAGS@
+CYGPATH_W = @CYGPATH_W@
+DEFS = @DEFS@
+DEPDIR = @DEPDIR@
+DOCBOOK_TO_MAN = @DOCBOOK_TO_MAN@
+DOXYGEN = @DOXYGEN@
+DSYMUTIL = @DSYMUTIL@
+ECHO = @ECHO@
+ECHO_C = @ECHO_C@
+ECHO_N = @ECHO_N@
+ECHO_T = @ECHO_T@
+EGREP = @EGREP@
+EXEEXT = @EXEEXT@
+F77 = @F77@
+FFLAGS = @FFLAGS@
+FLAC__TEST_LEVEL = @FLAC__TEST_LEVEL@
+FLAC__TEST_WITH_VALGRIND = @FLAC__TEST_WITH_VALGRIND@
+GAS = @GAS@
+GREP = @GREP@
+INSTALL = @INSTALL@
+INSTALL_DATA = @INSTALL_DATA@
+INSTALL_PROGRAM = @INSTALL_PROGRAM@
+INSTALL_SCRIPT = @INSTALL_SCRIPT@
+INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
+LDFLAGS = @LDFLAGS@
+LIBICONV = @LIBICONV@
+LIBOBJS = @LIBOBJS@
+LIBS = @LIBS@
+LIBTOOL = @LIBTOOL@
+LN_S = @LN_S@
+LTLIBICONV = @LTLIBICONV@
+LTLIBOBJS = @LTLIBOBJS@
+MAINT = @MAINT@
+MAKEINFO = @MAKEINFO@
+MINGW_WINSOCK_LIBS = @MINGW_WINSOCK_LIBS@
+MKDIR_P = @MKDIR_P@
+NASM = @NASM@
+NMEDIT = @NMEDIT@
+OBJEXT = @OBJEXT@
+OBJ_FORMAT = @OBJ_FORMAT@
+OGG_CFLAGS = @OGG_CFLAGS@
+OGG_LIBS = @OGG_LIBS@
+PACKAGE = @PACKAGE@
+PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
+PACKAGE_NAME = @PACKAGE_NAME@
+PACKAGE_STRING = @PACKAGE_STRING@
+PACKAGE_TARNAME = @PACKAGE_TARNAME@
+PACKAGE_VERSION = @PACKAGE_VERSION@
+PATH_SEPARATOR = @PATH_SEPARATOR@
+RANLIB = @RANLIB@
+SED = @SED@
+SET_MAKE = @SET_MAKE@
+SHELL = @SHELL@
+STRIP = @STRIP@
+VERSION = @VERSION@
+XMMS_CFLAGS = @XMMS_CFLAGS@
+XMMS_CONFIG = @XMMS_CONFIG@
+XMMS_DATA_DIR = @XMMS_DATA_DIR@
+XMMS_EFFECT_PLUGIN_DIR = @XMMS_EFFECT_PLUGIN_DIR@
+XMMS_GENERAL_PLUGIN_DIR = @XMMS_GENERAL_PLUGIN_DIR@
+XMMS_INPUT_PLUGIN_DIR = @XMMS_INPUT_PLUGIN_DIR@
+XMMS_LIBS = @XMMS_LIBS@
+XMMS_OUTPUT_PLUGIN_DIR = @XMMS_OUTPUT_PLUGIN_DIR@
+XMMS_PLUGIN_DIR = @XMMS_PLUGIN_DIR@
+XMMS_VERSION = @XMMS_VERSION@
+XMMS_VISUALIZATION_PLUGIN_DIR = @XMMS_VISUALIZATION_PLUGIN_DIR@
+abs_builddir = @abs_builddir@
+abs_srcdir = @abs_srcdir@
+abs_top_builddir = @abs_top_builddir@
+abs_top_srcdir = @abs_top_srcdir@
+ac_ct_CC = @ac_ct_CC@
+ac_ct_CXX = @ac_ct_CXX@
+ac_ct_F77 = @ac_ct_F77@
+am__include = @am__include@
+am__leading_dot = @am__leading_dot@
+am__quote = @am__quote@
+am__tar = @am__tar@
+am__untar = @am__untar@
+bindir = @bindir@
+build = @build@
+build_alias = @build_alias@
+build_cpu = @build_cpu@
+build_os = @build_os@
+build_vendor = @build_vendor@
+builddir = @builddir@
+datadir = @datadir@
+datarootdir = @datarootdir@
+docdir = @docdir@
+dvidir = @dvidir@
+exec_prefix = @exec_prefix@
+host = @host@
+host_alias = @host_alias@
+host_cpu = @host_cpu@
+host_os = @host_os@
+host_vendor = @host_vendor@
+htmldir = @htmldir@
+includedir = @includedir@
+infodir = @infodir@
+install_sh = @install_sh@
+libdir = @libdir@
+libexecdir = @libexecdir@
+localedir = @localedir@
+localstatedir = @localstatedir@
+mandir = @mandir@
+mkdir_p = @mkdir_p@
+oldincludedir = @oldincludedir@
+pdfdir = @pdfdir@
+prefix = @prefix@
+program_transform_name = @program_transform_name@
+psdir = @psdir@
+sbindir = @sbindir@
+sharedstatedir = @sharedstatedir@
+srcdir = @srcdir@
+sysconfdir = @sysconfdir@
+target_alias = @target_alias@
+top_builddir = @top_builddir@
+top_srcdir = @top_srcdir@
+SUFFIXES = .s .lo
+STRIP_NON_ASM = sh $(top_srcdir)/strip_non_asm_libtool_args.sh
+noinst_LTLIBRARIES = libFLAC-asm.la
+libFLAC_asm_la_SOURCES = \
+	fixed_asm.s \
+	lpc_asm.s
+
+all: all-am
+
+.SUFFIXES:
+.SUFFIXES: .s .lo .o .obj
+$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.am  $(am__configure_deps)
+	@for dep in $?; do \
+	  case '$(am__configure_deps)' in \
+	    *$$dep*) \
+	      cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh \
+		&& exit 0; \
+	      exit 1;; \
+	  esac; \
+	done; \
+	echo ' cd $(top_srcdir) && $(AUTOMAKE) --gnu  src/libFLAC/arm/Makefile'; \
+	cd $(top_srcdir) && \
+	  $(AUTOMAKE) --gnu  src/libFLAC/arm/Makefile
+.PRECIOUS: Makefile
+Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
+	@case '$?' in \
+	  *config.status*) \
+	    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
+	  *) \
+	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
+	    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
+	esac;
+
+$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+$(top_srcdir)/configure: @MAINTAINER_MODE_TRUE@ $(am__configure_deps)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+$(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+clean-noinstLTLIBRARIES:
+	-test -z "$(noinst_LTLIBRARIES)" || rm -f $(noinst_LTLIBRARIES)
+	@list='$(noinst_LTLIBRARIES)'; for p in $$list; do \
+	  dir="`echo $$p | sed -e 's|/[^/]*$$||'`"; \
+	  test "$$dir" != "$$p" || dir=.; \
+	  echo "rm -f \"$${dir}/so_locations\""; \
+	  rm -f "$${dir}/so_locations"; \
+	done
+libFLAC-asm.la: $(libFLAC_asm_la_OBJECTS) $(libFLAC_asm_la_DEPENDENCIES) 
+	$(LINK)  $(libFLAC_asm_la_OBJECTS) $(libFLAC_asm_la_LIBADD) $(LIBS)
+
+mostlyclean-compile:
+	-rm -f *.$(OBJEXT)
+
+distclean-compile:
+	-rm -f *.tab.c
+
+.s.o:
+	$(CCASCOMPILE) -c -o $@ $<
+
+.s.obj:
+	$(CCASCOMPILE) -c -o $@ `$(CYGPATH_W) '$<'`
+
+mostlyclean-libtool:
+	-rm -f *.lo
+
+clean-libtool:
+	-rm -rf .libs _libs
+
+ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
+	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '{ files[$$0] = 1; nonemtpy = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	mkid -fID $$unique
+tags: TAGS
+
+TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
+	tags=; \
+	here=`pwd`; \
+	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	if test -z "$(ETAGS_ARGS)$$tags$$unique"; then :; else \
+	  test -n "$$unique" || unique=$$empty_fix; \
+	  $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
+	    $$tags $$unique; \
+	fi
+ctags: CTAGS
+CTAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
+	tags=; \
+	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	test -z "$(CTAGS_ARGS)$$tags$$unique" \
+	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
+	     $$tags $$unique
+
+GTAGS:
+	here=`$(am__cd) $(top_builddir) && pwd` \
+	  && cd $(top_srcdir) \
+	  && gtags -i $(GTAGS_ARGS) $$here
+
+distclean-tags:
+	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
+
+distdir: $(DISTFILES)
+	@srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
+	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
+	list='$(DISTFILES)'; \
+	  dist_files=`for file in $$list; do echo $$file; done | \
+	  sed -e "s|^$$srcdirstrip/||;t" \
+	      -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
+	case $$dist_files in \
+	  */*) $(MKDIR_P) `echo "$$dist_files" | \
+			   sed '/\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \
+			   sort -u` ;; \
+	esac; \
+	for file in $$dist_files; do \
+	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
+	  if test -d $$d/$$file; then \
+	    dir=`echo "/$$file" | sed -e 's,/[^/]*$$,,'`; \
+	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
+	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
+	    fi; \
+	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
+	  else \
+	    test -f $(distdir)/$$file \
+	    || cp -p $$d/$$file $(distdir)/$$file \
+	    || exit 1; \
+	  fi; \
+	done
+check-am: all-am
+check: check-am
+all-am: Makefile $(LTLIBRARIES)
+installdirs:
+install: install-am
+install-exec: install-exec-am
+install-data: install-data-am
+uninstall: uninstall-am
+
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
+
+installcheck: installcheck-am
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
+	  install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
+	  `test -z '$(STRIP)' || \
+	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
+mostlyclean-generic:
+
+clean-generic:
+
+distclean-generic:
+	-test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)
+
+maintainer-clean-generic:
+	@echo "This command is intended for maintainers to use"
+	@echo "it deletes files that may require special tools to rebuild."
+clean: clean-am
+
+clean-am: clean-generic clean-libtool clean-noinstLTLIBRARIES \
+	mostlyclean-am
+
+distclean: distclean-am
+	-rm -f Makefile
+distclean-am: clean-am distclean-compile distclean-generic \
+	distclean-tags
+
+dvi: dvi-am
+
+dvi-am:
+
+html: html-am
+
+info: info-am
+
+info-am:
+
+install-data-am:
+
+install-dvi: install-dvi-am
+
+install-exec-am:
+
+install-html: install-html-am
+
+install-info: install-info-am
+
+install-man:
+
+install-pdf: install-pdf-am
+
+install-ps: install-ps-am
+
+installcheck-am:
+
+maintainer-clean: maintainer-clean-am
+	-rm -f Makefile
+maintainer-clean-am: distclean-am maintainer-clean-generic
+
+mostlyclean: mostlyclean-am
+
+mostlyclean-am: mostlyclean-compile mostlyclean-generic \
+	mostlyclean-libtool
+
+pdf: pdf-am
+
+pdf-am:
+
+ps: ps-am
+
+ps-am:
+
+uninstall-am:
+
+.MAKE: install-am install-strip
+
+.PHONY: CTAGS GTAGS all all-am check check-am clean clean-generic \
+	clean-libtool clean-noinstLTLIBRARIES ctags distclean \
+	distclean-compile distclean-generic distclean-libtool \
+	distclean-tags distdir dvi dvi-am html html-am info info-am \
+	install install-am install-data install-data-am install-dvi \
+	install-dvi-am install-exec install-exec-am install-html \
+	install-html-am install-info install-info-am install-man \
+	install-pdf install-pdf-am install-ps install-ps-am \
+	install-strip installcheck installcheck-am installdirs \
+	maintainer-clean maintainer-clean-generic mostlyclean \
+	mostlyclean-compile mostlyclean-generic mostlyclean-libtool \
+	pdf pdf-am ps ps-am tags uninstall uninstall-am
+
+
+.s.lo:
+	$(LTCCASCOMPILE) -c -o $@ $<
+# Tell versions [3.59,3.63) of GNU make to not export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:
diff -urN flac-1.2.1/src/libFLAC/cpu.c flac-1.2.1-patched/src/libFLAC/cpu.c
--- flac-1.2.1/src/libFLAC/cpu.c	2007-09-13 11:36:16.000000000 -0400
+++ flac-1.2.1-patched/src/libFLAC/cpu.c	2010-05-21 09:59:13.794662707 -0400
@@ -404,8 +404,15 @@
 	info->data.ppc.altivec = 0;
 	info->data.ppc.ppc64 = 0;
 #  endif
+#elif defined FLAC__CPU_ARM
+        info->type = FLAC__CPUINFO_TYPE_ARM;
+# if !defined FLAC__NO_ASM
+        info->use_asm = true;
+# endif
+
 # else
 	info->use_asm = false;
+
 # endif
 
 /*
diff -urN flac-1.2.1/src/libFLAC/include/private/cpu.h flac-1.2.1-patched/src/libFLAC/include/private/cpu.h
--- flac-1.2.1/src/libFLAC/include/private/cpu.h	2007-03-13 03:34:49.000000000 -0400
+++ flac-1.2.1-patched/src/libFLAC/include/private/cpu.h	2010-05-21 09:59:29.383413666 -0400
@@ -41,6 +41,7 @@
 typedef enum {
 	FLAC__CPUINFO_TYPE_IA32,
 	FLAC__CPUINFO_TYPE_PPC,
+	FLAC__CPUINFO_TYPE_ARM,
 	FLAC__CPUINFO_TYPE_UNKNOWN
 } FLAC__CPUInfo_Type;
 
@@ -64,12 +65,16 @@
 	FLAC__bool ppc64;
 } FLAC__CPUInfo_PPC;
 
+/* just generic ARM support for now */
+typedef FLAC__bool FLAC__CPUInfo_ARM;
+
 typedef struct {
 	FLAC__bool use_asm;
 	FLAC__CPUInfo_Type type;
 	union {
 		FLAC__CPUInfo_IA32 ia32;
 		FLAC__CPUInfo_PPC ppc;
+		FLAC__CPUInfo_ARM arm;
 	} data;
 } FLAC__CPUInfo;
 
diff -urN flac-1.2.1/src/libFLAC/include/private/fixed.h flac-1.2.1-patched/src/libFLAC/include/private/fixed.h
--- flac-1.2.1/src/libFLAC/include/private/fixed.h	2007-02-02 01:22:25.000000000 -0500
+++ flac-1.2.1-patched/src/libFLAC/include/private/fixed.h	2010-05-21 09:59:29.423414128 -0400
@@ -92,6 +92,10 @@
  *	IN  data[-order,-1]               previously-reconstructed historical samples
  *	OUT data[0,data_len-1]            original signal
  */
+#if (!defined(FLAC__NO_ASM) && defined(FLAC__CPU_ARM))
+void FLAC__fixed_restore_signal_asm_arm(const FLAC__int32 residual[], unsigned data_len, unsigned order, FLAC__int32 data[]);
+#else
 void FLAC__fixed_restore_signal(const FLAC__int32 residual[], unsigned data_len, unsigned order, FLAC__int32 data[]);
+#endif
 
 #endif
diff -urN flac-1.2.1/src/libFLAC/include/private/lpc.h flac-1.2.1-patched/src/libFLAC/include/private/lpc.h
--- flac-1.2.1/src/libFLAC/include/private/lpc.h	2007-04-03 19:58:44.000000000 -0400
+++ flac-1.2.1-patched/src/libFLAC/include/private/lpc.h	2010-05-21 09:59:29.483413437 -0400
@@ -176,6 +176,9 @@
 #  elif defined FLAC__CPU_PPC
 void FLAC__lpc_restore_signal_asm_ppc_altivec_16(const FLAC__int32 residual[], unsigned data_len, const FLAC__int32 qlp_coeff[], unsigned order, int lp_quantization, FLAC__int32 data[]);
 void FLAC__lpc_restore_signal_asm_ppc_altivec_16_order8(const FLAC__int32 residual[], unsigned data_len, const FLAC__int32 qlp_coeff[], unsigned order, int lp_quantization, FLAC__int32 data[]);
+#  elif defined FLAC__CPU_ARM
+void FLAC__lpc_restore_signal_asm_arm(const FLAC__int32 residual[], unsigned data_len, const FLAC__int32 qlp_coeff[], unsigned order, int lp_quantization, FLAC__int32 data[]);
+void FLAC__lpc_restore_signal_asm_arm_wide(const FLAC__int32 residual[], unsigned data_len, const FLAC__int32 qlp_coeff[], unsigned order, int lp_quantization, FLAC__int32 data[]);
 #  endif/* FLAC__CPU_IA32 || FLAC__CPU_PPC */
 #endif /* FLAC__NO_ASM */
 
diff -urN flac-1.2.1/src/libFLAC/include/private/Makefile flac-1.2.1-patched/src/libFLAC/include/private/Makefile
--- flac-1.2.1/src/libFLAC/include/private/Makefile	1969-12-31 19:00:00.000000000 -0500
+++ flac-1.2.1-patched/src/libFLAC/include/private/Makefile	2010-05-21 09:59:29.512161019 -0400
@@ -0,0 +1,451 @@
+# Makefile.in generated by automake 1.10.1 from Makefile.am.
+# src/libFLAC/include/private/Makefile.  Generated from Makefile.in by configure.
+
+# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
+# 2003, 2004, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
+# This Makefile.in is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+
+
+#  libFLAC - Free Lossless Audio Codec library
+#  Copyright (C) 2001,2002,2003,2004,2005,2006,2007  Josh Coalson
+#
+#  Redistribution and use in source and binary forms, with or without
+#  modification, are permitted provided that the following conditions
+#  are met:
+#
+#  - Redistributions of source code must retain the above copyright
+#  notice, this list of conditions and the following disclaimer.
+#
+#  - Redistributions in binary form must reproduce the above copyright
+#  notice, this list of conditions and the following disclaimer in the
+#  documentation and/or other materials provided with the distribution.
+#
+#  - Neither the name of the Xiph.org Foundation nor the names of its
+#  contributors may be used to endorse or promote products derived from
+#  this software without specific prior written permission.
+#
+#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
+#  ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
+#  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
+#  A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR
+#  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
+#  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
+#  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
+#  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+#  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+#  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+#  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+
+
+pkgdatadir = $(datadir)/flac
+pkglibdir = $(libdir)/flac
+pkgincludedir = $(includedir)/flac
+am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
+install_sh_DATA = $(install_sh) -c -m 644
+install_sh_PROGRAM = $(install_sh) -c
+install_sh_SCRIPT = $(install_sh) -c
+INSTALL_HEADER = $(INSTALL_DATA)
+transform = $(program_transform_name)
+NORMAL_INSTALL = :
+PRE_INSTALL = :
+POST_INSTALL = :
+NORMAL_UNINSTALL = :
+PRE_UNINSTALL = :
+POST_UNINSTALL = :
+build_triplet = armv5tejl-unknown-linux-gnu
+host_triplet = armv5tejl-unknown-linux-gnu
+subdir = src/libFLAC/include/private
+DIST_COMMON = $(noinst_HEADERS) $(srcdir)/Makefile.am \
+	$(srcdir)/Makefile.in
+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
+am__aclocal_m4_deps = $(top_srcdir)/m4/ogg.m4 $(top_srcdir)/m4/xmms.m4 \
+	$(top_srcdir)/configure.in
+am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
+	$(ACLOCAL_M4)
+mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/config.h
+CONFIG_CLEAN_FILES =
+SOURCES =
+DIST_SOURCES =
+HEADERS = $(noinst_HEADERS)
+ETAGS = etags
+CTAGS = ctags
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
+ACLOCAL = ${SHELL} /root/flac/flac-1.2.1/missing --run aclocal-1.10
+ACLOCAL_AMFLAGS = -I m4
+AMTAR = ${SHELL} /root/flac/flac-1.2.1/missing --run tar
+AR = ar
+AS = gas
+AUTOCONF = ${SHELL} /root/flac/flac-1.2.1/missing --run autoconf
+AUTOHEADER = ${SHELL} /root/flac/flac-1.2.1/missing --run autoheader
+AUTOMAKE = ${SHELL} /root/flac/flac-1.2.1/missing --run automake-1.10
+AWK = mawk
+CC = gcc
+CCAS = gcc
+CCASDEPMODE = depmode=gcc3
+CCASFLAGS = -pg
+CCDEPMODE = depmode=gcc3
+CFLAGS = -O3 -funroll-loops -finline-functions -Wall -W -Winline -pg
+CPP = gcc -E
+CPPFLAGS = -DFLaC__INLINE=__inline__ -DNDEBUG -I$(top_builddir) -I$(srcdir)/include -I$(top_srcdir)/include 
+CXX = g++
+CXXCPP = g++ -E
+CXXDEPMODE = depmode=gcc3
+CXXFLAGS = -g -O2
+CYGPATH_W = echo
+DEFS = -DHAVE_CONFIG_H
+DEPDIR = .deps
+DOCBOOK_TO_MAN = 
+DOXYGEN = 
+DSYMUTIL = 
+ECHO = echo
+ECHO_C = 
+ECHO_N = -n
+ECHO_T = 
+EGREP = /bin/grep -E
+EXEEXT = 
+F77 = 
+FFLAGS = 
+FLAC__TEST_LEVEL = 1
+FLAC__TEST_WITH_VALGRIND = no
+GAS = gas
+GREP = /bin/grep
+INSTALL = /usr/bin/install -c
+INSTALL_DATA = ${INSTALL} -m 644
+INSTALL_PROGRAM = ${INSTALL}
+INSTALL_SCRIPT = ${INSTALL}
+INSTALL_STRIP_PROGRAM = $(install_sh) -c -s
+LDFLAGS = -pg
+LIBICONV = 
+LIBOBJS = 
+LIBS = 
+LIBTOOL = $(SHELL) $(top_builddir)/libtool
+LN_S = ln -s
+LTLIBICONV = 
+LTLIBOBJS = 
+MAINT = #
+MAKEINFO = ${SHELL} /root/flac/flac-1.2.1/missing --run makeinfo
+MINGW_WINSOCK_LIBS = 
+MKDIR_P = /bin/mkdir -p
+NASM = nasm
+NMEDIT = 
+OBJEXT = o
+OBJ_FORMAT = elf
+OGG_CFLAGS = 
+OGG_LIBS = 
+PACKAGE = flac
+PACKAGE_BUGREPORT = 
+PACKAGE_NAME = 
+PACKAGE_STRING = 
+PACKAGE_TARNAME = 
+PACKAGE_VERSION = 
+PATH_SEPARATOR = :
+RANLIB = ranlib
+SED = /bin/sed
+SET_MAKE = 
+SHELL = /bin/sh
+STRIP = strip
+VERSION = 1.2.1
+XMMS_CFLAGS = 
+XMMS_CONFIG = 
+XMMS_DATA_DIR = 
+XMMS_EFFECT_PLUGIN_DIR = 
+XMMS_GENERAL_PLUGIN_DIR = 
+XMMS_INPUT_PLUGIN_DIR = 
+XMMS_LIBS = 
+XMMS_OUTPUT_PLUGIN_DIR = 
+XMMS_PLUGIN_DIR = 
+XMMS_VERSION = 
+XMMS_VISUALIZATION_PLUGIN_DIR = 
+abs_builddir = /root/flac/flac-1.2.1/src/libFLAC/include/private
+abs_srcdir = /root/flac/flac-1.2.1/src/libFLAC/include/private
+abs_top_builddir = /root/flac/flac-1.2.1
+abs_top_srcdir = /root/flac/flac-1.2.1
+ac_ct_CC = gcc
+ac_ct_CXX = g++
+ac_ct_F77 = 
+am__include = include
+am__leading_dot = .
+am__quote = 
+am__tar = ${AMTAR} chof - "$$tardir"
+am__untar = ${AMTAR} xf -
+bindir = ${exec_prefix}/bin
+build = armv5tejl-unknown-linux-gnu
+build_alias = 
+build_cpu = armv5tejl
+build_os = linux-gnu
+build_vendor = unknown
+builddir = .
+datadir = ${datarootdir}
+datarootdir = ${prefix}/share
+docdir = ${datarootdir}/doc/${PACKAGE}
+dvidir = ${docdir}
+exec_prefix = ${prefix}
+host = armv5tejl-unknown-linux-gnu
+host_alias = 
+host_cpu = armv5tejl
+host_os = linux-gnu
+host_vendor = unknown
+htmldir = ${docdir}
+includedir = ${prefix}/include
+infodir = ${datarootdir}/info
+install_sh = $(SHELL) /root/flac/flac-1.2.1/install-sh
+libdir = ${exec_prefix}/lib
+libexecdir = ${exec_prefix}/libexec
+localedir = ${datarootdir}/locale
+localstatedir = ${prefix}/var
+mandir = ${datarootdir}/man
+mkdir_p = /bin/mkdir -p
+oldincludedir = /usr/include
+pdfdir = ${docdir}
+prefix = /root/build
+program_transform_name = s,x,x,
+psdir = ${docdir}
+sbindir = ${exec_prefix}/sbin
+sharedstatedir = ${prefix}/com
+srcdir = .
+sysconfdir = ${prefix}/etc
+target_alias = 
+top_builddir = ../../../..
+top_srcdir = ../../../..
+noinst_HEADERS = \
+	all.h \
+	bitmath.h \
+	bitreader.h \
+	bitwriter.h \
+	cpu.h \
+	crc.h \
+	fixed.h \
+	float.h \
+	format.h \
+	lpc.h \
+	md5.h \
+	memory.h \
+	metadata.h \
+	ogg_decoder_aspect.h \
+	ogg_encoder_aspect.h \
+	ogg_helper.h \
+	ogg_mapping.h \
+	stream_encoder_framing.h \
+	window.h
+
+all: all-am
+
+.SUFFIXES:
+$(srcdir)/Makefile.in: # $(srcdir)/Makefile.am  $(am__configure_deps)
+	@for dep in $?; do \
+	  case '$(am__configure_deps)' in \
+	    *$$dep*) \
+	      cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh \
+		&& exit 0; \
+	      exit 1;; \
+	  esac; \
+	done; \
+	echo ' cd $(top_srcdir) && $(AUTOMAKE) --gnu  src/libFLAC/include/private/Makefile'; \
+	cd $(top_srcdir) && \
+	  $(AUTOMAKE) --gnu  src/libFLAC/include/private/Makefile
+.PRECIOUS: Makefile
+Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
+	@case '$?' in \
+	  *config.status*) \
+	    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
+	  *) \
+	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
+	    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
+	esac;
+
+$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+$(top_srcdir)/configure: # $(am__configure_deps)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+$(ACLOCAL_M4): # $(am__aclocal_m4_deps)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+mostlyclean-libtool:
+	-rm -f *.lo
+
+clean-libtool:
+	-rm -rf .libs _libs
+
+ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
+	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '{ files[$$0] = 1; nonemtpy = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	mkid -fID $$unique
+tags: TAGS
+
+TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
+	tags=; \
+	here=`pwd`; \
+	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	if test -z "$(ETAGS_ARGS)$$tags$$unique"; then :; else \
+	  test -n "$$unique" || unique=$$empty_fix; \
+	  $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
+	    $$tags $$unique; \
+	fi
+ctags: CTAGS
+CTAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
+	tags=; \
+	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	test -z "$(CTAGS_ARGS)$$tags$$unique" \
+	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
+	     $$tags $$unique
+
+GTAGS:
+	here=`$(am__cd) $(top_builddir) && pwd` \
+	  && cd $(top_srcdir) \
+	  && gtags -i $(GTAGS_ARGS) $$here
+
+distclean-tags:
+	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
+
+distdir: $(DISTFILES)
+	@srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
+	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
+	list='$(DISTFILES)'; \
+	  dist_files=`for file in $$list; do echo $$file; done | \
+	  sed -e "s|^$$srcdirstrip/||;t" \
+	      -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
+	case $$dist_files in \
+	  */*) $(MKDIR_P) `echo "$$dist_files" | \
+			   sed '/\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \
+			   sort -u` ;; \
+	esac; \
+	for file in $$dist_files; do \
+	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
+	  if test -d $$d/$$file; then \
+	    dir=`echo "/$$file" | sed -e 's,/[^/]*$$,,'`; \
+	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
+	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
+	    fi; \
+	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
+	  else \
+	    test -f $(distdir)/$$file \
+	    || cp -p $$d/$$file $(distdir)/$$file \
+	    || exit 1; \
+	  fi; \
+	done
+check-am: all-am
+check: check-am
+all-am: Makefile $(HEADERS)
+installdirs:
+install: install-am
+install-exec: install-exec-am
+install-data: install-data-am
+uninstall: uninstall-am
+
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
+
+installcheck: installcheck-am
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
+	  install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
+	  `test -z '$(STRIP)' || \
+	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
+mostlyclean-generic:
+
+clean-generic:
+
+distclean-generic:
+	-test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)
+
+maintainer-clean-generic:
+	@echo "This command is intended for maintainers to use"
+	@echo "it deletes files that may require special tools to rebuild."
+clean: clean-am
+
+clean-am: clean-generic clean-libtool mostlyclean-am
+
+distclean: distclean-am
+	-rm -f Makefile
+distclean-am: clean-am distclean-generic distclean-tags
+
+dvi: dvi-am
+
+dvi-am:
+
+html: html-am
+
+info: info-am
+
+info-am:
+
+install-data-am:
+
+install-dvi: install-dvi-am
+
+install-exec-am:
+
+install-html: install-html-am
+
+install-info: install-info-am
+
+install-man:
+
+install-pdf: install-pdf-am
+
+install-ps: install-ps-am
+
+installcheck-am:
+
+maintainer-clean: maintainer-clean-am
+	-rm -f Makefile
+maintainer-clean-am: distclean-am maintainer-clean-generic
+
+mostlyclean: mostlyclean-am
+
+mostlyclean-am: mostlyclean-generic mostlyclean-libtool
+
+pdf: pdf-am
+
+pdf-am:
+
+ps: ps-am
+
+ps-am:
+
+uninstall-am:
+
+.MAKE: install-am install-strip
+
+.PHONY: CTAGS GTAGS all all-am check check-am clean clean-generic \
+	clean-libtool ctags distclean distclean-generic \
+	distclean-libtool distclean-tags distdir dvi dvi-am html \
+	html-am info info-am install install-am install-data \
+	install-data-am install-dvi install-dvi-am install-exec \
+	install-exec-am install-html install-html-am install-info \
+	install-info-am install-man install-pdf install-pdf-am \
+	install-ps install-ps-am install-strip installcheck \
+	installcheck-am installdirs maintainer-clean \
+	maintainer-clean-generic mostlyclean mostlyclean-generic \
+	mostlyclean-libtool pdf pdf-am ps ps-am tags uninstall \
+	uninstall-am
+
+# Tell versions [3.59,3.63) of GNU make to not export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:
diff -urN flac-1.2.1/src/libFLAC/include/private/Makefile.in flac-1.2.1-patched/src/libFLAC/include/private/Makefile.in
--- flac-1.2.1/src/libFLAC/include/private/Makefile.in	2007-09-16 16:05:13.000000000 -0400
+++ flac-1.2.1-patched/src/libFLAC/include/private/Makefile.in	2010-05-21 09:59:29.554660405 -0400
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.7.9 from Makefile.am.
+# Makefile.in generated by automake 1.10.1 from Makefile.am.
 # @configure_input@
 
-# Copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003
-# Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
+# 2003, 2004, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -44,16 +44,11 @@
 #  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 #  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
-srcdir = @srcdir@
-top_srcdir = @top_srcdir@
 VPATH = @srcdir@
 pkgdatadir = $(datadir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
-top_builddir = ../../../..
-
 am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
-INSTALL = @INSTALL@
 install_sh_DATA = $(install_sh) -c -m 644
 install_sh_PROGRAM = $(install_sh) -c
 install_sh_SCRIPT = $(install_sh) -c
@@ -65,11 +60,27 @@
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
+build_triplet = @build@
 host_triplet = @host@
+subdir = src/libFLAC/include/private
+DIST_COMMON = $(noinst_HEADERS) $(srcdir)/Makefile.am \
+	$(srcdir)/Makefile.in
+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
+am__aclocal_m4_deps = $(top_srcdir)/m4/ogg.m4 $(top_srcdir)/m4/xmms.m4 \
+	$(top_srcdir)/configure.in
+am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
+	$(ACLOCAL_M4)
+mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/config.h
+CONFIG_CLEAN_FILES =
+SOURCES =
+DIST_SOURCES =
+HEADERS = $(noinst_HEADERS)
+ETAGS = etags
+CTAGS = ctags
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
 ACLOCAL_AMFLAGS = @ACLOCAL_AMFLAGS@
-AMDEP_FALSE = @AMDEP_FALSE@
-AMDEP_TRUE = @AMDEP_TRUE@
 AMTAR = @AMTAR@
 AR = @AR@
 AS = @AS@
@@ -79,6 +90,7 @@
 AWK = @AWK@
 CC = @CC@
 CCAS = @CCAS@
+CCASDEPMODE = @CCASDEPMODE@
 CCASFLAGS = @CCASFLAGS@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
@@ -89,12 +101,11 @@
 CXXDEPMODE = @CXXDEPMODE@
 CXXFLAGS = @CXXFLAGS@
 CYGPATH_W = @CYGPATH_W@
-DEBUG_FALSE = @DEBUG_FALSE@
-DEBUG_TRUE = @DEBUG_TRUE@
 DEFS = @DEFS@
 DEPDIR = @DEPDIR@
 DOCBOOK_TO_MAN = @DOCBOOK_TO_MAN@
 DOXYGEN = @DOXYGEN@
+DSYMUTIL = @DSYMUTIL@
 ECHO = @ECHO@
 ECHO_C = @ECHO_C@
 ECHO_N = @ECHO_N@
@@ -105,47 +116,9 @@
 FFLAGS = @FFLAGS@
 FLAC__TEST_LEVEL = @FLAC__TEST_LEVEL@
 FLAC__TEST_WITH_VALGRIND = @FLAC__TEST_WITH_VALGRIND@
-FLaC__CPU_IA32_FALSE = @FLaC__CPU_IA32_FALSE@
-FLaC__CPU_IA32_TRUE = @FLaC__CPU_IA32_TRUE@
-FLaC__CPU_PPC_FALSE = @FLaC__CPU_PPC_FALSE@
-FLaC__CPU_PPC_TRUE = @FLaC__CPU_PPC_TRUE@
-FLaC__CPU_SPARC_FALSE = @FLaC__CPU_SPARC_FALSE@
-FLaC__CPU_SPARC_TRUE = @FLaC__CPU_SPARC_TRUE@
-FLaC__HAS_AS_FALSE = @FLaC__HAS_AS_FALSE@
-FLaC__HAS_AS_TRUE = @FLaC__HAS_AS_TRUE@
-FLaC__HAS_AS__TEMPORARILY_DISABLED_FALSE = @FLaC__HAS_AS__TEMPORARILY_DISABLED_FALSE@
-FLaC__HAS_AS__TEMPORARILY_DISABLED_TRUE = @FLaC__HAS_AS__TEMPORARILY_DISABLED_TRUE@
-FLaC__HAS_DOCBOOK_TO_MAN_FALSE = @FLaC__HAS_DOCBOOK_TO_MAN_FALSE@
-FLaC__HAS_DOCBOOK_TO_MAN_TRUE = @FLaC__HAS_DOCBOOK_TO_MAN_TRUE@
-FLaC__HAS_DOXYGEN_FALSE = @FLaC__HAS_DOXYGEN_FALSE@
-FLaC__HAS_DOXYGEN_TRUE = @FLaC__HAS_DOXYGEN_TRUE@
-FLaC__HAS_GAS_FALSE = @FLaC__HAS_GAS_FALSE@
-FLaC__HAS_GAS_TRUE = @FLaC__HAS_GAS_TRUE@
-FLaC__HAS_GAS__TEMPORARILY_DISABLED_FALSE = @FLaC__HAS_GAS__TEMPORARILY_DISABLED_FALSE@
-FLaC__HAS_GAS__TEMPORARILY_DISABLED_TRUE = @FLaC__HAS_GAS__TEMPORARILY_DISABLED_TRUE@
-FLaC__HAS_NASM_FALSE = @FLaC__HAS_NASM_FALSE@
-FLaC__HAS_NASM_TRUE = @FLaC__HAS_NASM_TRUE@
-FLaC__HAS_OGG_FALSE = @FLaC__HAS_OGG_FALSE@
-FLaC__HAS_OGG_TRUE = @FLaC__HAS_OGG_TRUE@
-FLaC__HAS_XMMS_FALSE = @FLaC__HAS_XMMS_FALSE@
-FLaC__HAS_XMMS_TRUE = @FLaC__HAS_XMMS_TRUE@
-FLaC__INSTALL_XMMS_PLUGIN_LOCALLY_FALSE = @FLaC__INSTALL_XMMS_PLUGIN_LOCALLY_FALSE@
-FLaC__INSTALL_XMMS_PLUGIN_LOCALLY_TRUE = @FLaC__INSTALL_XMMS_PLUGIN_LOCALLY_TRUE@
-FLaC__NO_ASM_FALSE = @FLaC__NO_ASM_FALSE@
-FLaC__NO_ASM_TRUE = @FLaC__NO_ASM_TRUE@
-FLaC__SSE_OS_FALSE = @FLaC__SSE_OS_FALSE@
-FLaC__SSE_OS_TRUE = @FLaC__SSE_OS_TRUE@
-FLaC__SYS_DARWIN_FALSE = @FLaC__SYS_DARWIN_FALSE@
-FLaC__SYS_DARWIN_TRUE = @FLaC__SYS_DARWIN_TRUE@
-FLaC__SYS_LINUX_FALSE = @FLaC__SYS_LINUX_FALSE@
-FLaC__SYS_LINUX_TRUE = @FLaC__SYS_LINUX_TRUE@
-FLaC__USE_3DNOW_FALSE = @FLaC__USE_3DNOW_FALSE@
-FLaC__USE_3DNOW_TRUE = @FLaC__USE_3DNOW_TRUE@
-FLaC__USE_ALTIVEC_FALSE = @FLaC__USE_ALTIVEC_FALSE@
-FLaC__USE_ALTIVEC_TRUE = @FLaC__USE_ALTIVEC_TRUE@
-FLaC__WITH_CPPLIBS_FALSE = @FLaC__WITH_CPPLIBS_FALSE@
-FLaC__WITH_CPPLIBS_TRUE = @FLaC__WITH_CPPLIBS_TRUE@
 GAS = @GAS@
+GREP = @GREP@
+INSTALL = @INSTALL@
 INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
@@ -159,11 +132,11 @@
 LTLIBICONV = @LTLIBICONV@
 LTLIBOBJS = @LTLIBOBJS@
 MAINT = @MAINT@
-MAINTAINER_MODE_FALSE = @MAINTAINER_MODE_FALSE@
-MAINTAINER_MODE_TRUE = @MAINTAINER_MODE_TRUE@
 MAKEINFO = @MAKEINFO@
 MINGW_WINSOCK_LIBS = @MINGW_WINSOCK_LIBS@
+MKDIR_P = @MKDIR_P@
 NASM = @NASM@
+NMEDIT = @NMEDIT@
 OBJEXT = @OBJEXT@
 OBJ_FORMAT = @OBJ_FORMAT@
 OGG_CFLAGS = @OGG_CFLAGS@
@@ -176,6 +149,7 @@
 PACKAGE_VERSION = @PACKAGE_VERSION@
 PATH_SEPARATOR = @PATH_SEPARATOR@
 RANLIB = @RANLIB@
+SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
@@ -191,47 +165,57 @@
 XMMS_PLUGIN_DIR = @XMMS_PLUGIN_DIR@
 XMMS_VERSION = @XMMS_VERSION@
 XMMS_VISUALIZATION_PLUGIN_DIR = @XMMS_VISUALIZATION_PLUGIN_DIR@
-ac_ct_AR = @ac_ct_AR@
+abs_builddir = @abs_builddir@
+abs_srcdir = @abs_srcdir@
+abs_top_builddir = @abs_top_builddir@
+abs_top_srcdir = @abs_top_srcdir@
 ac_ct_CC = @ac_ct_CC@
 ac_ct_CXX = @ac_ct_CXX@
 ac_ct_F77 = @ac_ct_F77@
-ac_ct_RANLIB = @ac_ct_RANLIB@
-ac_ct_STRIP = @ac_ct_STRIP@
-am__fastdepCC_FALSE = @am__fastdepCC_FALSE@
-am__fastdepCC_TRUE = @am__fastdepCC_TRUE@
-am__fastdepCXX_FALSE = @am__fastdepCXX_FALSE@
-am__fastdepCXX_TRUE = @am__fastdepCXX_TRUE@
 am__include = @am__include@
 am__leading_dot = @am__leading_dot@
 am__quote = @am__quote@
+am__tar = @am__tar@
+am__untar = @am__untar@
 bindir = @bindir@
 build = @build@
 build_alias = @build_alias@
 build_cpu = @build_cpu@
 build_os = @build_os@
 build_vendor = @build_vendor@
+builddir = @builddir@
 datadir = @datadir@
+datarootdir = @datarootdir@
+docdir = @docdir@
+dvidir = @dvidir@
 exec_prefix = @exec_prefix@
 host = @host@
 host_alias = @host_alias@
 host_cpu = @host_cpu@
 host_os = @host_os@
 host_vendor = @host_vendor@
+htmldir = @htmldir@
 includedir = @includedir@
 infodir = @infodir@
 install_sh = @install_sh@
 libdir = @libdir@
 libexecdir = @libexecdir@
+localedir = @localedir@
 localstatedir = @localstatedir@
 mandir = @mandir@
+mkdir_p = @mkdir_p@
 oldincludedir = @oldincludedir@
+pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
+psdir = @psdir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
+srcdir = @srcdir@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
-
+top_builddir = @top_builddir@
+top_srcdir = @top_srcdir@
 noinst_HEADERS = \
 	all.h \
 	bitmath.h \
@@ -253,23 +237,38 @@
 	stream_encoder_framing.h \
 	window.h
 
-subdir = src/libFLAC/include/private
-ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
-CONFIG_HEADER = $(top_builddir)/config.h
-CONFIG_CLEAN_FILES =
-DIST_SOURCES =
-HEADERS = $(noinst_HEADERS)
-
-DIST_COMMON = $(noinst_HEADERS) $(srcdir)/Makefile.in Makefile.am
 all: all-am
 
 .SUFFIXES:
-$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am  $(top_srcdir)/configure.in $(ACLOCAL_M4)
+$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.am  $(am__configure_deps)
+	@for dep in $?; do \
+	  case '$(am__configure_deps)' in \
+	    *$$dep*) \
+	      cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh \
+		&& exit 0; \
+	      exit 1;; \
+	  esac; \
+	done; \
+	echo ' cd $(top_srcdir) && $(AUTOMAKE) --gnu  src/libFLAC/include/private/Makefile'; \
 	cd $(top_srcdir) && \
 	  $(AUTOMAKE) --gnu  src/libFLAC/include/private/Makefile
-Makefile: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.in  $(top_builddir)/config.status
-	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)
+.PRECIOUS: Makefile
+Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
+	@case '$?' in \
+	  *config.status*) \
+	    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
+	  *) \
+	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
+	    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
+	esac;
+
+$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+$(top_srcdir)/configure: @MAINTAINER_MODE_TRUE@ $(am__configure_deps)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+$(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
 
 mostlyclean-libtool:
 	-rm -f *.lo
@@ -277,26 +276,15 @@
 clean-libtool:
 	-rm -rf .libs _libs
 
-distclean-libtool:
-	-rm -f libtool
-uninstall-info-am:
-
-ETAGS = etags
-ETAGSFLAGS =
-
-CTAGS = ctags
-CTAGSFLAGS =
-
-tags: TAGS
-
 ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
 	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
 	unique=`for i in $$list; do \
 	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
 	  done | \
-	  $(AWK) '    { files[$$0] = 1; } \
-	       END { for (i in files) print i; }'`; \
+	  $(AWK) '{ files[$$0] = 1; nonemtpy = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
 	mkid -fID $$unique
+tags: TAGS
 
 TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
 		$(TAGS_FILES) $(LISP)
@@ -306,23 +294,23 @@
 	unique=`for i in $$list; do \
 	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
 	  done | \
-	  $(AWK) '    { files[$$0] = 1; } \
-	       END { for (i in files) print i; }'`; \
-	test -z "$(ETAGS_ARGS)$$tags$$unique" \
-	  || $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
-	     $$tags $$unique
-
+	  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	if test -z "$(ETAGS_ARGS)$$tags$$unique"; then :; else \
+	  test -n "$$unique" || unique=$$empty_fix; \
+	  $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
+	    $$tags $$unique; \
+	fi
 ctags: CTAGS
 CTAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
 		$(TAGS_FILES) $(LISP)
 	tags=; \
-	here=`pwd`; \
 	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
 	unique=`for i in $$list; do \
 	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
 	  done | \
-	  $(AWK) '    { files[$$0] = 1; } \
-	       END { for (i in files) print i; }'`; \
+	  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
+	      END { if (nonempty) { for (i in files) print i; }; }'`; \
 	test -z "$(CTAGS_ARGS)$$tags$$unique" \
 	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
 	     $$tags $$unique
@@ -334,28 +322,23 @@
 
 distclean-tags:
 	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
-DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
-
-top_distdir = ../../../..
-distdir = $(top_distdir)/$(PACKAGE)-$(VERSION)
 
 distdir: $(DISTFILES)
-	@srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`; \
-	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's|.|.|g'`; \
-	list='$(DISTFILES)'; for file in $$list; do \
-	  case $$file in \
-	    $(srcdir)/*) file=`echo "$$file" | sed "s|^$$srcdirstrip/||"`;; \
-	    $(top_srcdir)/*) file=`echo "$$file" | sed "s|^$$topsrcdirstrip/|$(top_builddir)/|"`;; \
-	  esac; \
+	@srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
+	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
+	list='$(DISTFILES)'; \
+	  dist_files=`for file in $$list; do echo $$file; done | \
+	  sed -e "s|^$$srcdirstrip/||;t" \
+	      -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
+	case $$dist_files in \
+	  */*) $(MKDIR_P) `echo "$$dist_files" | \
+			   sed '/\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \
+			   sort -u` ;; \
+	esac; \
+	for file in $$dist_files; do \
 	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
-	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
-	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
-	    dir="/$$dir"; \
-	    $(mkinstalldirs) "$(distdir)$$dir"; \
-	  else \
-	    dir=''; \
-	  fi; \
 	  if test -d $$d/$$file; then \
+	    dir=`echo "/$$file" | sed -e 's,/[^/]*$$,,'`; \
 	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
 	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
 	    fi; \
@@ -369,7 +352,6 @@
 check-am: all-am
 check: check-am
 all-am: Makefile $(HEADERS)
-
 installdirs:
 install: install-am
 install-exec: install-exec-am
@@ -390,7 +372,7 @@
 clean-generic:
 
 distclean-generic:
-	-rm -f $(CONFIG_CLEAN_FILES)
+	-test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)
 
 maintainer-clean-generic:
 	@echo "This command is intended for maintainers to use"
@@ -401,25 +383,34 @@
 
 distclean: distclean-am
 	-rm -f Makefile
-distclean-am: clean-am distclean-generic distclean-libtool \
-	distclean-tags
+distclean-am: clean-am distclean-generic distclean-tags
 
 dvi: dvi-am
 
 dvi-am:
 
+html: html-am
+
 info: info-am
 
 info-am:
 
 install-data-am:
 
+install-dvi: install-dvi-am
+
 install-exec-am:
 
+install-html: install-html-am
+
 install-info: install-info-am
 
 install-man:
 
+install-pdf: install-pdf-am
+
+install-ps: install-ps-am
+
 installcheck-am:
 
 maintainer-clean: maintainer-clean-am
@@ -438,17 +429,22 @@
 
 ps-am:
 
-uninstall-am: uninstall-info-am
+uninstall-am:
+
+.MAKE: install-am install-strip
 
 .PHONY: CTAGS GTAGS all all-am check check-am clean clean-generic \
 	clean-libtool ctags distclean distclean-generic \
-	distclean-libtool distclean-tags distdir dvi dvi-am info \
-	info-am install install-am install-data install-data-am \
-	install-exec install-exec-am install-info install-info-am \
-	install-man install-strip installcheck installcheck-am \
-	installdirs maintainer-clean maintainer-clean-generic \
-	mostlyclean mostlyclean-generic mostlyclean-libtool pdf pdf-am \
-	ps ps-am tags uninstall uninstall-am uninstall-info-am
+	distclean-libtool distclean-tags distdir dvi dvi-am html \
+	html-am info info-am install install-am install-data \
+	install-data-am install-dvi install-dvi-am install-exec \
+	install-exec-am install-html install-html-am install-info \
+	install-info-am install-man install-pdf install-pdf-am \
+	install-ps install-ps-am install-strip installcheck \
+	installcheck-am installdirs maintainer-clean \
+	maintainer-clean-generic mostlyclean mostlyclean-generic \
+	mostlyclean-libtool pdf pdf-am ps ps-am tags uninstall \
+	uninstall-am
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
diff -urN flac-1.2.1/src/libFLAC/Makefile.am flac-1.2.1-patched/src/libFLAC/Makefile.am
--- flac-1.2.1/src/libFLAC/Makefile.am	2007-09-14 17:06:17.000000000 -0400
+++ flac-1.2.1-patched/src/libFLAC/Makefile.am	2010-05-21 09:58:34.202219800 -0400
@@ -69,6 +69,9 @@
 endif
 endif
 
+ARCH_SUBDIRS = arm
+LOCAL_EXTRA_LIBADD = arm/libFLAC-asm.la
+
 libFLAC_la_LIBADD = $(LOCAL_EXTRA_LIBADD) @OGG_LIBS@
 
 SUBDIRS = $(ARCH_SUBDIRS) include .
diff -urN flac-1.2.1/src/libFLAC/stream_decoder.c flac-1.2.1-patched/src/libFLAC/stream_decoder.c
--- flac-1.2.1/src/libFLAC/stream_decoder.c	2007-09-13 11:38:05.000000000 -0400
+++ flac-1.2.1-patched/src/libFLAC/stream_decoder.c	2010-05-21 09:59:56.902161775 -0400
@@ -442,6 +442,9 @@
 			decoder->private_->local_lpc_restore_signal_16bit = FLAC__lpc_restore_signal_asm_ppc_altivec_16;
 			decoder->private_->local_lpc_restore_signal_16bit_order8 = FLAC__lpc_restore_signal_asm_ppc_altivec_16_order8;
 		}
+#elif defined FLAC__CPU_ARM
+		FLAC__ASSERT(decoder->private_->cpuinfo.type == FLAC__CPUINFO_TYPE_ARM);
+		fprintf(stderr, "ARM ASM in use\n");
 #endif
 	}
 #endif
@@ -2590,7 +2593,11 @@
 	/* decode the subframe */
 	if(do_full_decode) {
 		memcpy(decoder->private_->output[channel], subframe->warmup, sizeof(FLAC__int32) * order);
+#if (!defined(FLAC__NO_ASM) && defined(FLAC__CPU_ARM))
+		FLAC__fixed_restore_signal_asm_arm(decoder->private_->residual[channel], decoder->private_->frame.header.blocksize-order, order, decoder->private_->output[channel]+order);
+#else
 		FLAC__fixed_restore_signal(decoder->private_->residual[channel], decoder->private_->frame.header.blocksize-order, order, decoder->private_->output[channel]+order);
+#endif
 	}
 
 	return true;
@@ -2673,6 +2680,9 @@
 		if( (FLAC__uint64)order * ((((FLAC__uint64)1)<<bps)-1) * ((1<<subframe->qlp_coeff_precision)-1) < (((FLAC__uint64)-1) << 32) )
 		*/
 		if(bps + subframe->qlp_coeff_precision + FLAC__bitmath_ilog2(order) <= 32)
+#if (!defined(FLAC__NO_ASM) && defined(FLAC__CPU_ARM))
+			FLAC__lpc_restore_signal_asm_arm(decoder->private_->residual[channel], decoder->private_->frame.header.blocksize-order, subframe->qlp_coeff, order, subframe->quantization_level, decoder->private_->output[channel]+order);
+#else /* ! FLAC__CPU_ARM */
 			if(bps <= 16 && subframe->qlp_coeff_precision <= 16) {
 				if(order <= 8)
 					decoder->private_->local_lpc_restore_signal_16bit_order8(decoder->private_->residual[channel], decoder->private_->frame.header.blocksize-order, subframe->qlp_coeff, order, subframe->quantization_level, decoder->private_->output[channel]+order);
@@ -2681,8 +2691,13 @@
 			}
 			else
 				decoder->private_->local_lpc_restore_signal(decoder->private_->residual[channel], decoder->private_->frame.header.blocksize-order, subframe->qlp_coeff, order, subframe->quantization_level, decoder->private_->output[channel]+order);
+#endif /* ! FLAC__CPU_ARM */
 		else
+#if (!defined(FLAC__NO_ASM) && defined(FLAC__CPU_ARM))
+			FLAC__lpc_restore_signal_asm_arm_wide(decoder->private_->residual[channel], decoder->private_->frame.header.blocksize-order, subframe->qlp_coeff, order, subframe->quantization_level, decoder->private_->output[channel]+order);
+#else /* ! FLAC__CPU_ARM */
 			decoder->private_->local_lpc_restore_signal_64bit(decoder->private_->residual[channel], decoder->private_->frame.header.blocksize-order, subframe->qlp_coeff, order, subframe->quantization_level, decoder->private_->output[channel]+order);
+#endif /* ! FLAC__CPU_ARM */
 	}
 
 	return true;
