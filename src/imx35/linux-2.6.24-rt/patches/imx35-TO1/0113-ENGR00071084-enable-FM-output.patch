From 74dc95dadf3b29eb424ada274f8045ce0cb5e722 Mon Sep 17 00:00:00 2001
From: Jingyu Zhou <b02241@freescale.com>
Date: Thu, 3 Apr 2008 10:27:22 +0800
Subject: [PATCH] ENGR00071084 enable FM output

Enable FM output

Signed-off-by: Zhou Jingyu <Jingyu.Zhou@freescale.com>
---
 drivers/mxc/pmic/mc13783/pmic_audio.c    |    3 ++-
 include/asm-arm/arch-mxc/pmic_external.h |    2 ++
 2 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/drivers/mxc/pmic/mc13783/pmic_audio.c b/drivers/mxc/pmic/mc13783/pmic_audio.c
index 922627f..2495fd9 100644
--- a/drivers/mxc/pmic/mc13783/pmic_audio.c
+++ b/drivers/mxc/pmic/mc13783/pmic_audio.c
@@ -867,7 +867,8 @@ PMIC_STATUS pmic_audio_set_autodetect(int val)
 		return status;
 	reg_mask = 0;
 	if (val == 1) {
-		reg_write = SET_BITS(regAUDIO_RX_0, HSDETEN, 1);
+		reg_write = SET_BITS(regAUDIO_RX_0, HSDETEN, 1) |
+			SET_BITS(regAUDIO_RX_0, HSDETAUTOB, 1);
 	} else {
 		reg_write = 0;
 	}
diff --git a/include/asm-arm/arch-mxc/pmic_external.h b/include/asm-arm/arch-mxc/pmic_external.h
index 5679a21..aa51066 100644
--- a/include/asm-arm/arch-mxc/pmic_external.h
+++ b/include/asm-arm/arch-mxc/pmic_external.h
@@ -969,11 +969,13 @@ bool pmic_check_sensor(t_sensor sensor);
 */
 PMIC_STATUS pmic_get_sensors(t_sensor_bits * sensor_bits);
 
+#ifdef CONFIG_MXC_PMIC_MC9SDZ60
 PMIC_STATUS pmic_gpio_set_bit_val(t_mcu_gpio_reg reg, unsigned int bit,
 				  unsigned int val);
 
 PMIC_STATUS pmic_gpio_get_bit_val(t_mcu_gpio_reg reg, unsigned int bit,
 				  unsigned int *val);
+#endif
 
 #ifdef CONFIG_REGULATOR_MC13783
 /*!
-- 
1.5.4.4

