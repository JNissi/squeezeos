From 15c1fe93b6636b04dcd3d9dbe2386c9acd55e6fd Mon Sep 17 00:00:00 2001
From: Nancy Chen <Nancy.Chen@freescale.com>
Date: Tue, 19 Feb 2008 16:59:04 -0600
Subject: [PATCH] ENGR00066292 Fix build break with Linux2.6.24

Description:
Fix build break with Linux2.6.24

Signed-off-by: Nancy Chen <Nancy.Chen@freescale.com>
---
 drivers/regulator/reg-core.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/regulator/reg-core.c b/drivers/regulator/reg-core.c
index 1d68ad8..ecc94b6 100644
--- a/drivers/regulator/reg-core.c
+++ b/drivers/regulator/reg-core.c
@@ -271,11 +271,11 @@ static struct regulator_load *create_load_dev(struct regulator *regulator,
 		goto err_out;
 	}
 	err = sysfs_create_link(&regulator->cdev.kobj, &dev->kobj,
-		dev->kobj.name);
+		kobject_name(&dev->kobj));
 	if (err) {
 		printk
 		(KERN_WARNING "%s : could not add device link %s err %d\n",
-			__func__, dev->kobj.name, err);
+			__func__, kobject_name(&dev->kobj), err);
 		goto err_out;
 	}
 	return load;
@@ -331,7 +331,7 @@ void regulator_put(struct regulator *regulator, struct device *dev)
 	if (!dev)
 		goto put;
 
-	sysfs_remove_link(&regulator->cdev.kobj, dev->kobj.name);
+	sysfs_remove_link(&regulator->cdev.kobj, kobject_name(&dev->kobj));
 	list_for_each_entry_safe(load, l, &regulator->user_list, list) {
 		device_remove_file(dev, &load->dev_attr);
 		list_del(&load->list);
@@ -670,7 +670,7 @@ int regulator_set_platform_source(struct regulator *regulator,
 		"source");
 	if (err)
 	printk(KERN_WARNING "%s : could not add device link %s err %d\n",
-			__func__, parent->cdev.kobj.name, err);
+			__func__, kobject_name(&parent->cdev.kobj), err);
 	mutex_unlock(&list_mutex);
 
 	return 0;
-- 
1.5.4.4

