From 8c296445802658c730f970bf2c055f13c3221a61 Mon Sep 17 00:00:00 2001
From: Xinyu Chen <xinyu.chen@freescale.com>
Date: Wed, 16 Apr 2008 10:02:24 +0800
Subject: [PATCH] ENGR00072112 MX35 LCD does not display normally before bootup show logo

Put the IPU backlight initialize after fb driver initial

Signed-off-by: Xinyu Chen <xinyu.chen@freescale.com>
---
 drivers/video/backlight/mxc_ipu_bl.c |    4 ++--
 drivers/video/mxc/mxcfb_claa_wvga.c  |    1 -
 2 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/drivers/video/backlight/mxc_ipu_bl.c b/drivers/video/backlight/mxc_ipu_bl.c
index b300cf5..666831a 100644
--- a/drivers/video/backlight/mxc_ipu_bl.c
+++ b/drivers/video/backlight/mxc_ipu_bl.c
@@ -1,5 +1,5 @@
 /*
- * Copyright 2007 Freescale Semiconductor, Inc. All Rights Reserved.
+ * Copyright 2007-2008 Freescale Semiconductor, Inc. All Rights Reserved.
  */
 
 /*
@@ -148,7 +148,7 @@ static void __exit mxcbl_exit(void)
 	platform_driver_unregister(&mxcbl_driver);
 }
 
-module_init(mxcbl_init);
+late_initcall(mxcbl_init);
 module_exit(mxcbl_exit);
 
 MODULE_DESCRIPTION("Freescale MXC/i.MX IPU PWM Backlight Driver");
diff --git a/drivers/video/mxc/mxcfb_claa_wvga.c b/drivers/video/mxc/mxcfb_claa_wvga.c
index 9ce25d4..094f31a 100644
--- a/drivers/video/mxc/mxcfb_claa_wvga.c
+++ b/drivers/video/mxc/mxcfb_claa_wvga.c
@@ -120,7 +120,6 @@ static int __devinit lcd_probe(struct platform_device *pdev)
 			plat->reset();
 
 		io_reg = regulator_get(&pdev->dev, plat->io_reg);
-		regulator_enable(io_reg);
 	}
 
 	for (i = 0; i < num_registered_fb; i++) {
-- 
1.5.4.4

