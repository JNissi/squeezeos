From f1c474c56a27857601f706846e9f1dca093b8dc9 Mon Sep 17 00:00:00 2001
From: Wu Guoxing <b02248@freescale.com>
Date: Fri, 9 May 2008 16:22:13 +0800
Subject: [PATCH] ENGR00075754 change camera's mclk to normal freqency.

change camera's mclk to normal freqency.

Signed-off-by: Guoxing Wu <b02248@freescale.com>
---
 arch/arm/mach-mx35/mx35_3stack.c         |    2 +-
 arch/arm/mach-mx35/mx35_3stack_gpio.c    |    4 ++--
 drivers/media/video/mxc/capture/ov2640.c |   16 ++++++++--------
 3 files changed, 11 insertions(+), 11 deletions(-)

diff --git a/arch/arm/mach-mx35/mx35_3stack.c b/arch/arm/mach-mx35/mx35_3stack.c
index d0818ea..fb2c21e 100644
--- a/arch/arm/mach-mx35/mx35_3stack.c
+++ b/arch/arm/mach-mx35/mx35_3stack.c
@@ -265,7 +265,7 @@ static struct mxc_camera_platform_data camera_data = {
 	.io_regulator = NULL,
 	.analog_regulator = "LDO7",
 	.gpo_regulator = NULL,
-	.mclk = 15000000,
+	.mclk = 24000000,
 };
 
 static struct i2c_board_info mxc_i2c_board_info[] __initdata = {
diff --git a/arch/arm/mach-mx35/mx35_3stack_gpio.c b/arch/arm/mach-mx35/mx35_3stack_gpio.c
index 522df5d..45e6c3b 100644
--- a/arch/arm/mach-mx35/mx35_3stack_gpio.c
+++ b/arch/arm/mach-mx35/mx35_3stack_gpio.c
@@ -670,7 +670,7 @@ void gpio_usbotg_utmi_inactive(void)
 
 EXPORT_SYMBOL(gpio_usbotg_utmi_inactive);
 
-void gpio_sensor_active()
+void gpio_sensor_active(void)
 {
 	/*CSI D6 */
 	mxc_request_iomux(MX35_PIN_TX1, MUX_CONFIG_ALT6);
@@ -692,7 +692,7 @@ void gpio_sensor_active()
 
 EXPORT_SYMBOL(gpio_sensor_active);
 
-void gpio_sensor_inactive()
+void gpio_sensor_inactive(void)
 {
 	mxc_request_iomux(MX35_PIN_TX1, MUX_CONFIG_FUNC);
 	mxc_request_iomux(MX35_PIN_TX0, MUX_CONFIG_FUNC);
diff --git a/drivers/media/video/mxc/capture/ov2640.c b/drivers/media/video/mxc/capture/ov2640.c
index 61f0dd3..12735ad 100644
--- a/drivers/media/video/mxc/capture/ov2640.c
+++ b/drivers/media/video/mxc/capture/ov2640.c
@@ -198,22 +198,22 @@ static int ov2640_remove(struct i2c_client *client)
 	kfree(interface_param);
 	interface_param = NULL;
 
-	if (!IS_ERR_VALUE(io_regulator)) {
+	if (!IS_ERR_VALUE((unsigned long)io_regulator)) {
 		regulator_disable(io_regulator);
 		regulator_put(io_regulator, NULL);
 	}
 
-	if (!IS_ERR_VALUE(core_regulator)) {
+	if (!IS_ERR_VALUE((unsigned long)core_regulator)) {
 		regulator_disable(core_regulator);
 		regulator_put(core_regulator, NULL);
 	}
 
-	if (!IS_ERR_VALUE(gpo_regulator)) {
+	if (!IS_ERR_VALUE((unsigned long)gpo_regulator)) {
 		regulator_disable(gpo_regulator);
 		regulator_put(gpo_regulator, NULL);
 	}
 
-	if (!IS_ERR_VALUE(analog_regulator)) {
+	if (!IS_ERR_VALUE((unsigned long)analog_regulator)) {
 		regulator_disable(analog_regulator);
 		regulator_put(analog_regulator, NULL);
 	}
@@ -310,7 +310,7 @@ static sensor_interface *ov2640_config(int *frame_rate, int high_quality)
 	u32 out_width, out_height;
 
 	/*set io votage */
-	if (!IS_ERR_VALUE(io_regulator)) {
+	if (!IS_ERR_VALUE((unsigned long)io_regulator)) {
 		regulator_set_voltage(io_regulator, 2800000);
 		if (regulator_enable(io_regulator) != 0) {
 			dev_dbg(&ov2640_i2c_client->dev,
@@ -323,7 +323,7 @@ static sensor_interface *ov2640_config(int *frame_rate, int high_quality)
 	}
 
 	/*core votage */
-	if (!IS_ERR_VALUE(core_regulator)) {
+	if (!IS_ERR_VALUE((unsigned long)core_regulator)) {
 		regulator_set_voltage(core_regulator, 1300000);
 		if (regulator_enable(core_regulator) != 0) {
 			dev_dbg(&ov2640_i2c_client->dev,
@@ -336,7 +336,7 @@ static sensor_interface *ov2640_config(int *frame_rate, int high_quality)
 	}
 
 	/*GPO 3 */
-	if (!IS_ERR_VALUE(gpo_regulator)) {
+	if (!IS_ERR_VALUE((unsigned long)gpo_regulator)) {
 		if (regulator_enable(gpo_regulator) != 0) {
 			dev_dbg(&ov2640_i2c_client->dev,
 				"%s:gpo3 enable error\n", __func__);
@@ -347,7 +347,7 @@ static sensor_interface *ov2640_config(int *frame_rate, int high_quality)
 		}
 	}
 
-	if (!IS_ERR_VALUE(analog_regulator)) {
+	if (!IS_ERR_VALUE((unsigned long)analog_regulator)) {
 		regulator_set_voltage(analog_regulator, 2000000);
 		if (regulator_enable(analog_regulator) != 0) {
 			dev_dbg(&ov2640_i2c_client->dev,
-- 
1.5.4.4

